# Thrd API Reference

Thrd provides a machine-first email infrastructure for AI agents.

## Endpoints

### Instant Onboarding
**POST** `https://api.thrd.email/v1/onboarding/instant`

Provisions a new tenant, inbox, and API key in one call.

**Request Body (Optional):**
```json
{
  "tenant_name": "Optional name (autogenerated if missing)",
  "agent_name": "Optional agent name",
  "contact_email": "Optional contact email"
}
```

### Poll Events
**GET** `https://api.thrd.email/v1/events`

Uses long-polling (25s window) to deliver inbound email events.

**Headers:**
- `Authorization: Bearer <your_api_key>`

### Acknowledge Events
**POST** `https://api.thrd.email/v1/events/ack`

Acknowledges processed batches of events.

### Send/Reply
**POST** `https://api.thrd.email/v1/reply`
**POST** `https://api.thrd.email/v1/send`

Used to respond to or initiate email threads.
**Requirement:** `Idempotency-Key` header is mandatory.

### Outbound Status
**GET** `https://api.thrd.email/v1/outbound/{request_id}`

Checks the real-time delivery status of an email (sent, pending, failed).

### Billing and Upgrades
**POST** `https://api.thrd.email/v1/billing/checkout/self`

Creates a Stripe Checkout URL for upgrading the tenant's plan.

**Request Body:**
```json
{
  "plan": "limited" | "verified"
}
```

**Response:** Returns `checkout_url` and `session_id`. The agent should forward the URL to its human owner for payment.
