!function(){"use strict";if(document.getElementById("raon-chat-widget"))return;const e=document.currentScript,n=e&&e.dataset.api||"http://localhost:8400",o=e&&e.dataset.title||"ë¼ì˜¨ AI ë¹„ì„œ",t=e&&e.dataset.model||"qwen3:8b",a=document.createElement("div");a.id="raon-chat-widget",document.body.appendChild(a);const r=document.createElement("style");r.textContent='\n    #raon-chat-toggle{position:fixed;bottom:24px;right:24px;z-index:10000;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#FF6B35,#F7C948);border:none;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);font-size:24px;color:#fff;transition:transform .2s}\n    #raon-chat-toggle:hover{transform:scale(1.1)}\n    #raon-chat-panel{position:fixed;bottom:92px;right:24px;z-index:10000;width:380px;max-height:520px;background:#fff;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,.15);display:none;flex-direction:column;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,sans-serif}\n    #raon-chat-panel.open{display:flex}\n    .raon-header{background:linear-gradient(135deg,#FF6B35,#F7C948);color:#fff;padding:16px 20px;font-size:16px;font-weight:600;display:flex;justify-content:space-between;align-items:center}\n    .raon-header button{background:none;border:none;color:#fff;font-size:20px;cursor:pointer;padding:0}\n    .raon-messages{flex:1;overflow-y:auto;padding:16px;min-height:300px;max-height:360px}\n    .raon-msg{margin-bottom:12px;max-width:85%;padding:10px 14px;border-radius:12px;font-size:14px;line-height:1.5;word-break:break-word}\n    .raon-msg.bot{background:#f0f0f0;color:#333;border-bottom-left-radius:4px}\n    .raon-msg.user{background:#FF6B35;color:#fff;margin-left:auto;border-bottom-right-radius:4px}\n    .raon-msg.loading{color:#999;font-style:italic}\n    .raon-input-area{display:flex;border-top:1px solid #eee;padding:12px;gap:8px;align-items:center}\n    .raon-input-area input[type="text"]{flex:1;border:1px solid #ddd;border-radius:8px;padding:10px 14px;font-size:14px;outline:none}\n    .raon-input-area input[type="text"]:focus{border-color:#FF6B35}\n    .raon-input-area button{background:#FF6B35;color:#fff;border:none;border-radius:8px;padding:10px 16px;font-size:14px;cursor:pointer;font-weight:600}\n    .raon-input-area button:disabled{opacity:.5;cursor:not-allowed}\n    .raon-pdf-btn{background:none!important;color:#999!important;border:none!important;font-size:20px!important;padding:8px!important;cursor:pointer;border-radius:8px!important;transition:color .2s}\n    .raon-pdf-btn:hover{color:#FF6B35!important}\n    .raon-pdf-btn.has-file{color:#FF6B35!important}\n    .raon-file-badge{font-size:11px;color:#FF6B35;padding:2px 8px;background:#FFF3ED;border-radius:8px;display:none;align-items:center;gap:4px}\n    .raon-file-badge.visible{display:flex}\n    .raon-file-badge button{background:none!important;border:none!important;color:#999!important;font-size:14px!important;padding:0!important;cursor:pointer}\n    .raon-mode-selector{display:flex;gap:6px;padding:8px 16px;background:#fafafa;border-bottom:1px solid #eee;overflow-x:auto}\n    .raon-mode-btn{background:#eee;border:none;border-radius:16px;padding:4px 12px;font-size:12px;cursor:pointer;white-space:nowrap;color:#555}\n    .raon-mode-btn.active{background:#FF6B35;color:#fff}\n    @media(max-width:480px){#raon-chat-panel{width:calc(100vw - 32px);right:16px;bottom:88px}}\n  ',document.head.appendChild(r),a.innerHTML=`\n    <button id="raon-chat-toggle">ğŸŒ…</button>\n    <div id="raon-chat-panel">\n      <div class="raon-header"><span>${o}</span><button id="raon-close">âœ•</button></div>\n      <div class="raon-mode-selector">\n        <button class="raon-mode-btn active" data-mode="evaluate">ğŸ“Š í‰ê°€</button>\n        <button class="raon-mode-btn" data-mode="improve">ğŸ’¡ ê°œì„ </button>\n        <button class="raon-mode-btn" data-mode="match">ğŸ¯ ë§¤ì¹­</button>\n        <button class="raon-mode-btn" data-mode="checklist">âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸</button>\n      </div>\n      <div class="raon-messages" id="raon-messages"><div class="raon-msg bot">ì•ˆë…•í•˜ì„¸ìš”! ë¼ì˜¨ì…ë‹ˆë‹¤ ğŸŒ…<br>ì‚¬ì—…ê³„íšì„œë¥¼ ë¶™ì—¬ë„£ê±°ë‚˜ PDFë¥¼ ì²¨ë¶€í•´ì£¼ì„¸ìš”.</div></div>\n      <div class="raon-file-badge" id="raon-file-badge"><span id="raon-file-name"></span><button id="raon-file-clear">âœ•</button></div>\n      <div class="raon-input-area">\n        <input type="file" id="raon-file-input" accept=".pdf" style="display:none"/>\n        <button class="raon-pdf-btn" id="raon-pdf-btn" title="PDF ì—…ë¡œë“œ">ğŸ“</button>\n        <input type="text" id="raon-input" placeholder="ì‚¬ì—… ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."/>\n        <button id="raon-send">ì „ì†¡</button>\n      </div>\n    </div>`;let i="evaluate",d=null;const s=document.getElementById("raon-chat-panel"),l=document.getElementById("raon-messages"),p=document.getElementById("raon-input"),c=document.getElementById("raon-send"),u=document.getElementById("raon-file-input"),m=document.getElementById("raon-pdf-btn"),b=document.getElementById("raon-file-badge"),f=document.getElementById("raon-file-name"),g=document.getElementById("raon-file-clear");function x(e,n){const o=document.createElement("div");return o.className="raon-msg "+n,o.innerHTML=e,l.appendChild(o),l.scrollTop=l.scrollHeight,o}async function h(){const e=p.value.trim();if(!e&&!d)return;x(d?"ğŸ“„ "+f.textContent+(e?" â€” "+e:""):e,"user"),p.value="",c.disabled=!0;const o=x("ë¶„ì„ ì¤‘...","bot loading"),a={model:t};d?(a.pdf_base64=d,e&&(a.text=e),d=null,u.value="",b.classList.remove("visible"),m.classList.remove("has-file")):a.text=e;try{const e=await fetch(n+"/v1/"+i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await e.json();if(o.remove(),"ok"===t.status){const e=(t.result||t.response||"").replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");x((t.score?'<div style="font-size:20px;margin-bottom:8px">ğŸ“Š '+t.score+"ì </div>":"")+e,"bot")}else x("âš ï¸ "+(t.error||"ì˜¤ë¥˜"),"bot")}catch(e){o.remove(),x("âš ï¸ ì„œë²„ ì—°ê²° ì‹¤íŒ¨","bot")}c.disabled=!1,p.focus()}document.getElementById("raon-chat-toggle").onclick=()=>s.classList.toggle("open"),document.getElementById("raon-close").onclick=()=>s.classList.remove("open"),document.querySelectorAll(".raon-mode-btn").forEach(e=>e.onclick=()=>{document.querySelectorAll(".raon-mode-btn").forEach(e=>e.classList.remove("active")),e.classList.add("active"),i=e.dataset.mode}),m.onclick=()=>u.click(),u.onchange=()=>{const e=u.files[0];if(!e)return;if(e.size>10485760)return x("âš ï¸ íŒŒì¼ì´ ë„ˆë¬´ í½ë‹ˆë‹¤ (ìµœëŒ€ 10MB)","bot"),void(u.value="");const n=new FileReader;n.onload=()=>{d=n.result.split(",")[1],f.textContent=e.name,b.classList.add("visible"),m.classList.add("has-file")},n.readAsDataURL(e)},g.onclick=()=>{d=null,u.value="",b.classList.remove("visible"),m.classList.remove("has-file")},c.onclick=h,p.onkeydown=e=>{"Enter"===e.key&&h()}}();